<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">

    <title>Snake</title>
</head>
<body id="body">
    <div class="d-flex justify-content-center align-items-center h-100">
        <canvas id="canvas" width="600px" height="600px">

        </canvas>
    </div>
    <script>
        // Классы
        class Cell{
            positionX;
            positionY;

            sizeX = 24;
            sizeY = 24;

            indent = 1;

            color = "#212121";

            constructor(color){
                if(color != undefined)
                    this.color = color;
            }
            setPositionCell(cell) {
                this.positionX = cell.positionX;
                this.positionY = cell.positionY;
            }
            setPositionXY(posX, posY) {
                if (posX == undefined) {
                    throw "Не задана позиция клетки по X";
                }
                if (posY == undefined) {
                    throw "Не задана позиция клетки по Y";
                }
                this.positionX = posX * (this.sizeX + this.indent);
                this.positionY = posY * (this.sizeY + this.indent);
            }
        }
        
        // Яблоко должно содержать клетку или наоборот?
        class Apple{
            color = "tomato";
            cell = {};
            setCell(cell){
                this.cell = cell;
            }
        }

        class Grid{
            sizeX = 24;
            sizeY = 24;
            cells = new Array();
            constructor(){
                for(let i = 0; i < this.sizeX; i++){
                    for(let j = 0; j < this.sizeY; j++){
                        let cell = new Cell();

                        cell.setPositionXY(i,j);
                        this.cells.push(cell);
                    }
                }
            }
        }

        class Engine{
            static canvas;
            static ctx;

            constructor(canvas){
                this.canvas = canvas;
                this.ctx = this.canvas.getContext('2d');
            }

            drawGrid(grid){
                for (let i = 0; i < grid.cells.length; i++) {
                    let cell = grid.cells[i];
                    this.drawCell(cell);
                }
            }
            
            drawCell(cell){
                this.ctx.fillStyle = cell.color;
                this.ctx.fillRect(cell.positionX, cell.positionY, cell.sizeX, cell.sizeY);
            }

            drawApple(apple){
                this.ctx.fillStyle = apple.color;
                this.ctx.fillRect(apple.cell.positionX, 
                    apple.cell.positionY, 
                    apple.cell.sizeX, 
                    apple.cell.sizeY);
            }

            clear(){
                this.ctx.clearRect(0,0, this.canvas.width, this.canvas.height);
            }
        }
    </script>
</body>
</html>